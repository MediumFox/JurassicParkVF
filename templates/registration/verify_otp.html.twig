{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
    <div class="flex justify-center items-center min-h-screen w-[100vw] bg-gris overflow-hidden">
        <div class="bg-white shadow-lg rounded-lg flex w-[45%] items-center justify-center max-w-6xl h-screen relative">
            <div class="w-[70%] flex flex-col justify-center items-center p-8 h-full">
                <h1 class="text-2xl font-bold text-bleuLune text-center mb-2 uppercase">Vérifions que c'est bien vous.</h1>
                <span class="text-bleuGlace text-center mb-8">Un code vous a été envoyé à l'adresse suivante : {{client.email}}, notez le ci-dessous pour valider la création de votre compte.</span>
                {% for label, messages in app.flashes %}
                    {% for message in messages %}
                        <div class="alert alert-{{ label }} bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endfor %}
                <form method="post" class="w-[90%] flex flex-col items-center" id="form">
                    <div class="w-[65%] mb-5 flex justify-between">
                        <input type="text" name="v1" id="otp1" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                        <input type="text" name="v2" id="otp2" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                        <input type="text" name="v3" id="otp3" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                        <input type="text" name="v4" id="otp4" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                        <input type="text" name="v5" id="otp5" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                        <input type="text" name="v6" id="otp6" class="valeur-opt rounded h-[2.5vw] w-[2vw] border border-bleuGlace p-2 focus:outline-none focus:ring-2 focus:ring-bleuClair text-center" required maxlength="1" pattern="\d" inputmode="numeric">
                    </div>
                    <button type="submit" id="btnSubmit" disabled class=" bg-bleuLune text-white font-semibold px-4 py-2 rounded w-full transition duration-300 cursor-pointer">Valider</button>
                </form>

                <p class="mt-4 text-bleuLune">
                    Vous n'avez rien reçu ? <a href="{{ path('app_register_client') }}" class="text-bleuGlace underline" disabled>Nouveau code dans <span id="timerMail">60</span> s</a>
                </p>
            </div>
            <div class="absolute fill-bleuLune">
                <svg class="size-25 rotate-330 absolute right-70 top-11 " version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.154,60.154c-0.307,6.914-7.924,11.564-9.791,18.098c-1.846,6.451-2.76,16.438-11.053,16.036  c-3.406-0.167-7.979,1.371-10.479-1.433c-2.151-2.41-2.396-6.486-3.437-9.387c-1.188-3.306-0.91-6.867-2.75-10.039  c-0.666-1.152-2.576-2.843-2.816-4.103c0,0-1.559-6.017-2.223-7.347c-0.871-1.75-1.682-2.846-1.437-5.033  c0.196-1.764,1.913-3.271,2.071-4.576c0.236-1.949-2.266-2.804-1.803-4.782c2.041-0.363,2.779,0.679,3.916,1.976  c0.676,0.772,0.401,1.024,1.316,1.667c0.504,0.353,1.296,0.125,1.891,0.619c1.979,1.643,2.533,5.985,3.145,8.308  c0.423,1.604,1.277,3.159,1.615,4.806c0.377,1.842,0.188,3.375,1.547,4.873c4.021,4.434,4.174-2.429,4.174-5.104  c0-4.029-2.021-19.623,3.859-19.505c0.031-1.577-1.356-7.299,1.873-6.613c2.134,0.453,1.635,5.014,0.939,6.374  c5.487,0.49,3.229,14.105,2.73,17.695c-0.256,1.858-3.047,8.285,0.904,8.463c2.229,0.104,4.101-5.071,5.213-6.687  c0.873-1.269,1.654-2.526,2.744-3.666c1.34-1.403,3.297-1.724,4.418-2.927c0.621-0.665,1.48-4.09,3.271-2.594  C99.384,55.604,99.167,59.9,99.154,60.154z M1.75,31.169c1.834,6.672,10.292,9.52,13.561,15.475  c3.229,5.883,6.333,15.418,14.331,13.188c3.286-0.918,8.086-0.432,9.904-3.721c1.562-2.825,0.896-6.854,1.27-9.913  c0.424-3.487-0.634-6.898,0.454-10.399c0.395-1.271,1.884-3.341,1.839-4.623c0,0,0.187-6.214,0.538-7.658  c0.462-1.898,1.009-3.147,0.286-5.226c-0.583-1.675-2.592-2.767-3.036-4.003c-0.662-1.847,1.587-3.236,0.699-5.062  c-2.07,0.098-2.561,1.278-3.381,2.794c-0.488,0.903-0.166,1.088-0.916,1.917c-0.413,0.456-1.235,0.409-1.706,1.022  c-1.564,2.041-1.144,6.4-1.225,8.799c-0.057,1.657-0.545,3.363-0.509,5.043c0.04,1.878,0.565,3.333-0.428,5.095  c-2.94,5.213-4.609-1.444-5.202-4.05c-0.893-3.93-2.378-19.582-8.087-18.165c-0.379-1.532-0.294-7.419-3.292-6.035  c-1.981,0.916-0.482,5.252,0.496,6.424c-5.242,1.694-0.021,14.47,1.259,17.861c0.662,1.755,4.809,7.403,0.994,8.454  c-2.151,0.592-5.122-4.04-6.564-5.367c-1.133-1.042-2.174-2.097-3.488-2.966c-1.62-1.072-3.598-0.95-4.958-1.875  c-0.752-0.51-2.35-3.659-3.763-1.804C0.518,26.781,1.683,30.924,1.75,31.169z"/><text x="0" y="115" fill="white" font-size="5px" font-weight="bold" font-family="'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"></svg>
                <svg class="size-25 rotate-330 absolute right-60 top-28" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.154,60.154c-0.307,6.914-7.924,11.564-9.791,18.098c-1.846,6.451-2.76,16.438-11.053,16.036  c-3.406-0.167-7.979,1.371-10.479-1.433c-2.151-2.41-2.396-6.486-3.437-9.387c-1.188-3.306-0.91-6.867-2.75-10.039  c-0.666-1.152-2.576-2.843-2.816-4.103c0,0-1.559-6.017-2.223-7.347c-0.871-1.75-1.682-2.846-1.437-5.033  c0.196-1.764,1.913-3.271,2.071-4.576c0.236-1.949-2.266-2.804-1.803-4.782c2.041-0.363,2.779,0.679,3.916,1.976  c0.676,0.772,0.401,1.024,1.316,1.667c0.504,0.353,1.296,0.125,1.891,0.619c1.979,1.643,2.533,5.985,3.145,8.308  c0.423,1.604,1.277,3.159,1.615,4.806c0.377,1.842,0.188,3.375,1.547,4.873c4.021,4.434,4.174-2.429,4.174-5.104  c0-4.029-2.021-19.623,3.859-19.505c0.031-1.577-1.356-7.299,1.873-6.613c2.134,0.453,1.635,5.014,0.939,6.374  c5.487,0.49,3.229,14.105,2.73,17.695c-0.256,1.858-3.047,8.285,0.904,8.463c2.229,0.104,4.101-5.071,5.213-6.687  c0.873-1.269,1.654-2.526,2.744-3.666c1.34-1.403,3.297-1.724,4.418-2.927c0.621-0.665,1.48-4.09,3.271-2.594  C99.384,55.604,99.167,59.9,99.154,60.154z M1.75,31.169c1.834,6.672,10.292,9.52,13.561,15.475  c3.229,5.883,6.333,15.418,14.331,13.188c3.286-0.918,8.086-0.432,9.904-3.721c1.562-2.825,0.896-6.854,1.27-9.913  c0.424-3.487-0.634-6.898,0.454-10.399c0.395-1.271,1.884-3.341,1.839-4.623c0,0,0.187-6.214,0.538-7.658  c0.462-1.898,1.009-3.147,0.286-5.226c-0.583-1.675-2.592-2.767-3.036-4.003c-0.662-1.847,1.587-3.236,0.699-5.062  c-2.07,0.098-2.561,1.278-3.381,2.794c-0.488,0.903-0.166,1.088-0.916,1.917c-0.413,0.456-1.235,0.409-1.706,1.022  c-1.564,2.041-1.144,6.4-1.225,8.799c-0.057,1.657-0.545,3.363-0.509,5.043c0.04,1.878,0.565,3.333-0.428,5.095  c-2.94,5.213-4.609-1.444-5.202-4.05c-0.893-3.93-2.378-19.582-8.087-18.165c-0.379-1.532-0.294-7.419-3.292-6.035  c-1.981,0.916-0.482,5.252,0.496,6.424c-5.242,1.694-0.021,14.47,1.259,17.861c0.662,1.755,4.809,7.403,0.994,8.454  c-2.151,0.592-5.122-4.04-6.564-5.367c-1.133-1.042-2.174-2.097-3.488-2.966c-1.62-1.072-3.598-0.95-4.958-1.875  c-0.752-0.51-2.35-3.659-3.763-1.804C0.518,26.781,1.683,30.924,1.75,31.169z"/><text x="0" y="115" fill="white" font-size="5px" font-weight="bold" font-family="'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"></svg>
                <svg class="size-25 rotate-330 absolute right-50 top-45 " version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.154,60.154c-0.307,6.914-7.924,11.564-9.791,18.098c-1.846,6.451-2.76,16.438-11.053,16.036  c-3.406-0.167-7.979,1.371-10.479-1.433c-2.151-2.41-2.396-6.486-3.437-9.387c-1.188-3.306-0.91-6.867-2.75-10.039  c-0.666-1.152-2.576-2.843-2.816-4.103c0,0-1.559-6.017-2.223-7.347c-0.871-1.75-1.682-2.846-1.437-5.033  c0.196-1.764,1.913-3.271,2.071-4.576c0.236-1.949-2.266-2.804-1.803-4.782c2.041-0.363,2.779,0.679,3.916,1.976  c0.676,0.772,0.401,1.024,1.316,1.667c0.504,0.353,1.296,0.125,1.891,0.619c1.979,1.643,2.533,5.985,3.145,8.308  c0.423,1.604,1.277,3.159,1.615,4.806c0.377,1.842,0.188,3.375,1.547,4.873c4.021,4.434,4.174-2.429,4.174-5.104  c0-4.029-2.021-19.623,3.859-19.505c0.031-1.577-1.356-7.299,1.873-6.613c2.134,0.453,1.635,5.014,0.939,6.374  c5.487,0.49,3.229,14.105,2.73,17.695c-0.256,1.858-3.047,8.285,0.904,8.463c2.229,0.104,4.101-5.071,5.213-6.687  c0.873-1.269,1.654-2.526,2.744-3.666c1.34-1.403,3.297-1.724,4.418-2.927c0.621-0.665,1.48-4.09,3.271-2.594  C99.384,55.604,99.167,59.9,99.154,60.154z M1.75,31.169c1.834,6.672,10.292,9.52,13.561,15.475  c3.229,5.883,6.333,15.418,14.331,13.188c3.286-0.918,8.086-0.432,9.904-3.721c1.562-2.825,0.896-6.854,1.27-9.913  c0.424-3.487-0.634-6.898,0.454-10.399c0.395-1.271,1.884-3.341,1.839-4.623c0,0,0.187-6.214,0.538-7.658  c0.462-1.898,1.009-3.147,0.286-5.226c-0.583-1.675-2.592-2.767-3.036-4.003c-0.662-1.847,1.587-3.236,0.699-5.062  c-2.07,0.098-2.561,1.278-3.381,2.794c-0.488,0.903-0.166,1.088-0.916,1.917c-0.413,0.456-1.235,0.409-1.706,1.022  c-1.564,2.041-1.144,6.4-1.225,8.799c-0.057,1.657-0.545,3.363-0.509,5.043c0.04,1.878,0.565,3.333-0.428,5.095  c-2.94,5.213-4.609-1.444-5.202-4.05c-0.893-3.93-2.378-19.582-8.087-18.165c-0.379-1.532-0.294-7.419-3.292-6.035  c-1.981,0.916-0.482,5.252,0.496,6.424c-5.242,1.694-0.021,14.47,1.259,17.861c0.662,1.755,4.809,7.403,0.994,8.454  c-2.151,0.592-5.122-4.04-6.564-5.367c-1.133-1.042-2.174-2.097-3.488-2.966c-1.62-1.072-3.598-0.95-4.958-1.875  c-0.752-0.51-2.35-3.659-3.763-1.804C0.518,26.781,1.683,30.924,1.75,31.169z"/><text x="0" y="115" fill="white" font-size="5px" font-weight="bold" font-family="'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"></svg>
                <svg class="size-25 rotate-330 absolute right-40 top-62" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.154,60.154c-0.307,6.914-7.924,11.564-9.791,18.098c-1.846,6.451-2.76,16.438-11.053,16.036  c-3.406-0.167-7.979,1.371-10.479-1.433c-2.151-2.41-2.396-6.486-3.437-9.387c-1.188-3.306-0.91-6.867-2.75-10.039  c-0.666-1.152-2.576-2.843-2.816-4.103c0,0-1.559-6.017-2.223-7.347c-0.871-1.75-1.682-2.846-1.437-5.033  c0.196-1.764,1.913-3.271,2.071-4.576c0.236-1.949-2.266-2.804-1.803-4.782c2.041-0.363,2.779,0.679,3.916,1.976  c0.676,0.772,0.401,1.024,1.316,1.667c0.504,0.353,1.296,0.125,1.891,0.619c1.979,1.643,2.533,5.985,3.145,8.308  c0.423,1.604,1.277,3.159,1.615,4.806c0.377,1.842,0.188,3.375,1.547,4.873c4.021,4.434,4.174-2.429,4.174-5.104  c0-4.029-2.021-19.623,3.859-19.505c0.031-1.577-1.356-7.299,1.873-6.613c2.134,0.453,1.635,5.014,0.939,6.374  c5.487,0.49,3.229,14.105,2.73,17.695c-0.256,1.858-3.047,8.285,0.904,8.463c2.229,0.104,4.101-5.071,5.213-6.687  c0.873-1.269,1.654-2.526,2.744-3.666c1.34-1.403,3.297-1.724,4.418-2.927c0.621-0.665,1.48-4.09,3.271-2.594  C99.384,55.604,99.167,59.9,99.154,60.154z M1.75,31.169c1.834,6.672,10.292,9.52,13.561,15.475  c3.229,5.883,6.333,15.418,14.331,13.188c3.286-0.918,8.086-0.432,9.904-3.721c1.562-2.825,0.896-6.854,1.27-9.913  c0.424-3.487-0.634-6.898,0.454-10.399c0.395-1.271,1.884-3.341,1.839-4.623c0,0,0.187-6.214,0.538-7.658  c0.462-1.898,1.009-3.147,0.286-5.226c-0.583-1.675-2.592-2.767-3.036-4.003c-0.662-1.847,1.587-3.236,0.699-5.062  c-2.07,0.098-2.561,1.278-3.381,2.794c-0.488,0.903-0.166,1.088-0.916,1.917c-0.413,0.456-1.235,0.409-1.706,1.022  c-1.564,2.041-1.144,6.4-1.225,8.799c-0.057,1.657-0.545,3.363-0.509,5.043c0.04,1.878,0.565,3.333-0.428,5.095  c-2.94,5.213-4.609-1.444-5.202-4.05c-0.893-3.93-2.378-19.582-8.087-18.165c-0.379-1.532-0.294-7.419-3.292-6.035  c-1.981,0.916-0.482,5.252,0.496,6.424c-5.242,1.694-0.021,14.47,1.259,17.861c0.662,1.755,4.809,7.403,0.994,8.454  c-2.151,0.592-5.122-4.04-6.564-5.367c-1.133-1.042-2.174-2.097-3.488-2.966c-1.62-1.072-3.598-0.95-4.958-1.875  c-0.752-0.51-2.35-3.659-3.763-1.804C0.518,26.781,1.683,30.924,1.75,31.169z"/><text x="0" y="115" fill="white" font-size="5px" font-weight="bold" font-family="'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"></svg>
                <svg class="size-25 rotate-330 absolute right-30 top-79" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M99.154,60.154c-0.307,6.914-7.924,11.564-9.791,18.098c-1.846,6.451-2.76,16.438-11.053,16.036  c-3.406-0.167-7.979,1.371-10.479-1.433c-2.151-2.41-2.396-6.486-3.437-9.387c-1.188-3.306-0.91-6.867-2.75-10.039  c-0.666-1.152-2.576-2.843-2.816-4.103c0,0-1.559-6.017-2.223-7.347c-0.871-1.75-1.682-2.846-1.437-5.033  c0.196-1.764,1.913-3.271,2.071-4.576c0.236-1.949-2.266-2.804-1.803-4.782c2.041-0.363,2.779,0.679,3.916,1.976  c0.676,0.772,0.401,1.024,1.316,1.667c0.504,0.353,1.296,0.125,1.891,0.619c1.979,1.643,2.533,5.985,3.145,8.308  c0.423,1.604,1.277,3.159,1.615,4.806c0.377,1.842,0.188,3.375,1.547,4.873c4.021,4.434,4.174-2.429,4.174-5.104  c0-4.029-2.021-19.623,3.859-19.505c0.031-1.577-1.356-7.299,1.873-6.613c2.134,0.453,1.635,5.014,0.939,6.374  c5.487,0.49,3.229,14.105,2.73,17.695c-0.256,1.858-3.047,8.285,0.904,8.463c2.229,0.104,4.101-5.071,5.213-6.687  c0.873-1.269,1.654-2.526,2.744-3.666c1.34-1.403,3.297-1.724,4.418-2.927c0.621-0.665,1.48-4.09,3.271-2.594  C99.384,55.604,99.167,59.9,99.154,60.154z M1.75,31.169c1.834,6.672,10.292,9.52,13.561,15.475  c3.229,5.883,6.333,15.418,14.331,13.188c3.286-0.918,8.086-0.432,9.904-3.721c1.562-2.825,0.896-6.854,1.27-9.913  c0.424-3.487-0.634-6.898,0.454-10.399c0.395-1.271,1.884-3.341,1.839-4.623c0,0,0.187-6.214,0.538-7.658  c0.462-1.898,1.009-3.147,0.286-5.226c-0.583-1.675-2.592-2.767-3.036-4.003c-0.662-1.847,1.587-3.236,0.699-5.062  c-2.07,0.098-2.561,1.278-3.381,2.794c-0.488,0.903-0.166,1.088-0.916,1.917c-0.413,0.456-1.235,0.409-1.706,1.022  c-1.564,2.041-1.144,6.4-1.225,8.799c-0.057,1.657-0.545,3.363-0.509,5.043c0.04,1.878,0.565,3.333-0.428,5.095  c-2.94,5.213-4.609-1.444-5.202-4.05c-0.893-3.93-2.378-19.582-8.087-18.165c-0.379-1.532-0.294-7.419-3.292-6.035  c-1.981,0.916-0.482,5.252,0.496,6.424c-5.242,1.694-0.021,14.47,1.259,17.861c0.662,1.755,4.809,7.403,0.994,8.454  c-2.151,0.592-5.122-4.04-6.564-5.367c-1.133-1.042-2.174-2.097-3.488-2.966c-1.62-1.072-3.598-0.95-4.958-1.875  c-0.752-0.51-2.35-3.659-3.763-1.804C0.518,26.781,1.683,30.924,1.75,31.169z"/><text x="0" y="115" fill="white" font-size="5px" font-weight="bold" font-family="'Helvetica Neue', Helvetica, Arial-Unicode, Arial, Sans-serif"></svg>
            </div>
        </div>
        <div class="w-[55%] bg-bleuGlace flex items-center justify-center h-[100vh]">
            <img src="chemin_vers_image.jpg" alt="Illustration de connexion" class="max-w-full h-auto">
        </div>
    </div>

    <script>
        function isNumber(value) {
            return /^\d$/.test(value); 
        }

        let count = 60;
        const counter = document.getElementById("timerMail");
        const form = document.getElementById("form");
        const btnSubmit = document.getElementById("btnSubmit");
        const inputOtp = document.querySelectorAll(".valeur-opt");
        btnSubmit.style.opacity = '0.7';
        setInterval(() => {
            if(count != 0){
                count -=1;
                counter.innerText = count;
            }
        }, 1000);

        inputOtp.forEach((element, index) => {
            element.addEventListener('input', (event) => {
                const value = event.target.value;

                if (!isNumber(value)) {
                    event.stopPropagation();
                    event.target.value = '';
                    return;
                }

                if (value.length === 1 && inputOtp[index + 1]) {
                    inputOtp[index + 1].focus();
                }

                if (value.length === 1 && !inputOtp[index + 1]) {
                    btnSubmit.style.opacity = "1";
                    btnSubmit.disabled = false;
                    form.submit(); 
                }
            });
        });

    </script>
{% endblock %}

